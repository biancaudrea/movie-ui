{"ast":null,"code":"var _jsxFileName = \"/home/bianca/Documents/workspace/repositories/reactapp-movies/springboot-react-keycloak/movies-ui/src/components/settings/UserSettings.js\";\nimport React, { Component } from 'react';\nimport { withKeycloak } from '@react-keycloak/web';\nimport { moviesApi } from '../misc/MoviesApi';\nimport { handleLogError } from '../misc/Helpers';\nimport { Container, Form, Segment, Button, Divider, Grid } from 'semantic-ui-react';\nimport { getAvatarUrl } from '../misc/Helpers';\nimport { withRouter } from 'react-router-dom';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass UserSettings extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      avatar: '',\n      originalAvatar: '',\n      imageLoading: false\n    };\n\n    this.handleSuffle = () => {\n      this.setState({\n        imageLoading: true\n      });\n      const {\n        username\n      } = this.state;\n      const avatar = username + Math.floor(Math.random() * 1000) + 1;\n      this.setState({\n        avatar\n      });\n    };\n\n    this.handleCancel = () => {\n      this.props.history.push(\"/home\");\n    };\n\n    this.handleSave = async () => {\n      const {\n        avatar\n      } = this.state;\n      const {\n        keycloak\n      } = this.props;\n\n      try {\n        const userExtra = {\n          avatar\n        };\n        await moviesApi.saveUserExtrasMe(keycloak.token, userExtra);\n        keycloak['avatar'] = avatar;\n        this.props.history.push(\"/home\");\n      } catch (error) {\n        handleLogError(error);\n      }\n    };\n\n    this.handleImageLoad = () => {\n      this.setState({\n        imageLoading: false\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      keycloak\n    } = this.props;\n\n    try {\n      const response = await moviesApi.getUserExtrasMe(keycloak.token);\n      const {\n        username,\n        avatar\n      } = response.data;\n      this.setState({\n        username,\n        avatar,\n        originalAvatar: avatar\n      });\n    } catch (error) {\n      handleLogError(error);\n    }\n  }\n\n  render() {\n    const {\n      avatar,\n      originalAvatar,\n      imageLoading\n    } = this.state;\n    const avatarImage = !avatar ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: getAvatarUrl(avatar),\n      onLoad: this.handleImageLoad,\n      alt: \"user-avatar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 43\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        centered: true,\n        children: /*#__PURE__*/_jsxDEV(Grid.Row, {\n          children: /*#__PURE__*/_jsxDEV(Segment, {\n            style: {\n              width: '330px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Avatar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  height: 300\n                },\n                children: avatarImage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                fluid: true,\n                onClick: this.handleSuffle,\n                color: \"blue\",\n                disabled: imageLoading,\n                children: \"Shuffle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button.Group, {\n                fluid: true,\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  onClick: this.handleCancel,\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button.Or, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: originalAvatar === avatar,\n                  onClick: this.handleSave,\n                  positive: true,\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c2 = withRouter(_c = withKeycloak(UserSettings));\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$withRouter\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/bianca/Documents/workspace/repositories/reactapp-movies/springboot-react-keycloak/movies-ui/src/components/settings/UserSettings.js"],"names":["React","Component","withKeycloak","moviesApi","handleLogError","Container","Form","Segment","Button","Divider","Grid","getAvatarUrl","withRouter","UserSettings","state","username","avatar","originalAvatar","imageLoading","handleSuffle","setState","Math","floor","random","handleCancel","props","history","push","handleSave","keycloak","userExtra","saveUserExtrasMe","token","error","handleImageLoad","componentDidMount","response","getUserExtrasMe","data","render","avatarImage","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withKeycloak } from '@react-keycloak/web'\nimport { moviesApi } from '../misc/MoviesApi'\nimport { handleLogError } from '../misc/Helpers'\nimport { Container, Form, Segment, Button, Divider, Grid } from 'semantic-ui-react'\nimport { getAvatarUrl } from '../misc/Helpers'\nimport { withRouter } from 'react-router-dom'\n\nclass UserSettings extends Component {\n  state = {\n    username: '',\n    avatar: '',\n    originalAvatar: '',\n    imageLoading: false\n  }\n\n  async componentDidMount() {\n    const { keycloak } = this.props\n\n    try {\n      const response = await moviesApi.getUserExtrasMe(keycloak.token)\n      const { username, avatar } = response.data\n      this.setState({ username, avatar, originalAvatar: avatar })\n    } catch (error) {\n      handleLogError(error)\n    }\n  }\n\n  handleSuffle = () => {\n    this.setState({ imageLoading: true })\n    const { username } = this.state\n    const avatar = username + Math.floor(Math.random() * 1000) + 1\n    this.setState({ avatar })\n  }\n\n  handleCancel = () => {\n    this.props.history.push(\"/home\")\n  }\n\n  handleSave = async () => {\n    const { avatar } = this.state\n    const { keycloak } = this.props\n\n    try {\n      const userExtra = { avatar }\n      await moviesApi.saveUserExtrasMe(keycloak.token, userExtra)\n      keycloak['avatar'] = avatar\n      this.props.history.push(\"/home\")\n    } catch (error) {\n      handleLogError(error)\n    }\n  }\n\n  handleImageLoad = () => {\n    this.setState({ imageLoading: false })\n  }\n\n  render() {\n    const { avatar, originalAvatar, imageLoading } = this.state\n    const avatarImage = !avatar ? <></> : <img src={getAvatarUrl(avatar)} onLoad={this.handleImageLoad} alt='user-avatar' />\n\n    return (\n      <Container>\n        <Grid centered>\n          <Grid.Row>\n            <Segment style={{ width: '330px' }}>\n              <Form>\n                <strong>Avatar</strong>\n                <div style={{ height: 300 }}>\n                  {avatarImage}\n                </div>\n                <Divider />\n                <Button fluid onClick={this.handleSuffle} color='blue' disabled={imageLoading}>Shuffle</Button>\n                <Divider />\n                <Button.Group fluid>\n                  <Button onClick={this.handleCancel}>Cancel</Button>\n                  <Button.Or />\n                  <Button disabled={originalAvatar === avatar} onClick={this.handleSave} positive>Save</Button>\n                </Button.Group>\n              </Form>\n            </Segment>\n          </Grid.Row>\n        </Grid>\n      </Container>\n    )\n  }\n}\n\nexport default withRouter(withKeycloak(UserSettings))\n"]},"metadata":{},"sourceType":"module"}